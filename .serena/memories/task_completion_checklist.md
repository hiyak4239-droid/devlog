# DevLog - タスク完了時のチェックリスト

## 機能実装完了時

### 1. コードチェック
```bash
# コードスタイルチェック
bin/rubocop

# 自動修正可能な問題を修正
bin/rubocop -a
```

### 2. セキュリティチェック
```bash
# セキュリティ脆弱性チェック
bin/brakeman

# Gem脆弱性チェック
bin/bundler-audit
```

### 3. テスト実行
```bash
# 全テスト実行
bin/rails test

# システムテスト実行（必要に応じて）
bin/rails test:system
```

### 4. 動作確認
- 開発サーバーで実際に動作を確認
- ブラウザで期待通りの動作をすることを確認
- エラーログ（`log/development.log`）を確認

### 5. Git コミット
```bash
# 変更ファイル確認
git status

# 差分確認
git diff

# ステージング
git add .

# コミット（日本語メッセージ）
git commit -m "機能の説明"

# プッシュ（必要に応じて）
git push origin main
```

## バグ修正完了時

### 1. 問題の再現確認
- バグが修正されていることを確認
- 関連する機能に影響がないことを確認

### 2. テスト追加（推奨）
- バグに対するテストケースを追加
- 再発防止のための回帰テスト

### 3. 上記「機能実装完了時」のチェックリストに従う

## リファクタリング完了時

### 1. 動作確認
- リファクタリング前と同じ動作をすることを確認
- すべてのテストがパスすることを確認

### 2. 上記「機能実装完了時」のチェックリストに従う

## 本番デプロイ前

### 1. ローカルでの最終確認
```bash
# すべてのテストをパス
bin/rails test

# CIスクリプト実行
bin/ci
```

### 2. マイグレーション確認
```bash
# マイグレーションが正しく実行されるか確認
bin/rails db:migrate:status
```

### 3. アセットプリコンパイル確認
```bash
# アセットが正しくコンパイルされるか確認
RAILS_ENV=production bin/rails assets:precompile
```

### 4. デプロイ実行
```bash
# Gitプッシュ（Renderの自動デプロイが発火）
git push origin main

# または Kamal デプロイ
bin/kamal deploy
```

### 5. 本番環境での動作確認
- https://devlog-gm30.onrender.com/articles で動作確認
- ログ確認
- データベース確認

## 注意事項

### MVPの原則
- 完璧な80%より、動く60%を早くリリース
- デプロイしてから改善する

### スコープクリープ対策
- 新しいアイデアは「要件定義書」の「今後の拡張予定」に追記
- 現在のフェーズを完了させてから検討

### エラー発生時
- エラーメッセージを確認
- ログファイル（`log/development.log`）を確認
- Claude Codeに質問する

### サーバー再起動
- 設定ファイルやルーティング変更後は必ずサーバー再起動
- `Ctrl + C`で停止 → `bin/rails server`で再起動
